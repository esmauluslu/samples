<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Editor</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        #viewer {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="viewer"></div>
    
    <script src="https://unpkg.com/@pdftron/webviewer@10/public/lib/webviewer.min.js"></script>
    <script>
        WebViewer({
            path: 'https://unpkg.com/@pdftron/webviewer@10/public',
            initialDoc: 'https://resplendent-cheesecake-496ff3.netlify.app/hrtoolkit.pdf',
            
            // Özellikler
            fullAPI: true,
            enableAnnotations: true,
            enableMeasurement: true,
            enableRedaction: false,
            
            // Türkçe dil desteği (opsiyonel)
            // l: 'tr',
            
        }, document.getElementById('viewer')).then(instance => {
            const { UI, Core } = instance;
            
            // Düzenlenmiş PDF'i indirme fonksiyonu
            UI.setHeaderItems(header => {
                header.push({
                    type: 'actionButton',
                    img: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>',
                    title: 'İndir',
                    onClick: async () => {
                        const doc = Core.documentViewer.getDocument();
                        const xfdfString = await Core.annotationManager.exportAnnotations();
                        const data = await doc.getFileData({
                            xfdfString,
                            flatten: true // Çizimleri PDF'e yapıştır
                        });
                        const arr = new Uint8Array(data);
                        const blob = new Blob([arr], { type: 'application/pdf' });
                        
                        // İndirme
                        const link = document.createElement('a');
                        link.href = URL.createObjectURL(blob);
                        link.download = 'edited-hrtoolkit.pdf';
                        link.click();
                    }
                });
            });

            // Varsayılan araçları göster
            UI.enableFeatures([UI.Feature.Annotations]);
            UI.enableFeatures([UI.Feature.Download]);
            
            console.log('PDF Editor hazır!');
        });
    </script>
</body>
</html>
